FROM golang:1.19.3-alpine3.17

ARG COMMAND
ENV COMMAND=$COMMAND

ARG DB_USER
ENV DB_USER=$DB_USER
ARG DB_PASS
ENV DB_PASS=$DB_PASS

RUN mkdir /app
ADD . /app
WORKDIR /app

RUN go build
ENTRYPOINT /app/nbfacts $COMMAND